<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Comment</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
 <body cz-shortcut-listen="true">
  <div class="comments"></div>
  <div class="likes"></div>

  <input type="text" id="comment-input" placeholder="Ваш комментарий">
  <button id="add-button">Добавить комментарий</button>

  <script type="text/javascript">
    var baseUrl = 'http://212.92.98.105';
    var comment_id;

    $.ajax({
      url: baseUrl + '/comments',
      complete: function(data) {
        console.log(data);
        comment_id = data.comment_id;
        var showComment = data.responseJSON;
        for(var key in showComment) {
          $('<span/>', {
            class: 'comment', 
            text: showComment[key].text, //+ ' |  удалить',
            comment_id: data.comment_id
          }).appendTo('.comments').after('<span class"like">Лайкнуть</span><br/>');

          $('.like').on('click', function() {
            console.log($(this).comment_id)
          })
        };
        
      }  
    })

    $('#add-button').click(function() {
      var text = $('#comment-input').val();
    //   console.log(product);

      $.ajax({
        url: baseUrl + '/comments?text=' + text,
        type: 'post',
        success: function(data) {
          console.log(data)

          $('<div/>', {
            class: 'comment', 
            text: text + ' |  удалить',
            comment_id: data.comment_id

    //         click: function() {
    //           product_id = data.product_id
    //           // alert('Вы нажали на товар в корзине')
    //           $.ajax({
    //             url: baseUrl + '/shop?comment_id=' + comment_id + '&product_id=' + product_id,
    //             type: 'delete',
    //             success: function(data) {
    //               console.log(data);
    //               $('.product[product_id=' + product_id + '').remove();
    //               $total.html(+$total.html() - price);
    //             }
    //           })
    //         }
          }).appendTo('.comments')



    //       var $total = $('.total')

    //       $total.html(+$total.html() + price)
        }
      })
    })
  </script>

<div class="__disk_root__" style="position: static;"></div>
</body>

</html>


</body>
</html>